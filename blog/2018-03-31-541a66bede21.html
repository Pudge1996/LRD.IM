<!DOCTYPE html>
<html lang="zh-cmn-Hans">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=devUIice-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <meta name="keywords" content="李瑞东 Pudge 广州 设计 design UI设计 体验设计 B端设计 设计作品 作品集"> 
    <meta name="author" content="李瑞东" />
    <meta name="robots" content="index,follow" />
    <meta name="google" content="index,follow" />
    <meta name="googlebot" content="index,follow" />
    <meta name="verify" content="index,follow" />
    <meta name="format-detection" content="telephone=no, email=no" />
    <!-- It may be good for SEO -->

    <title>利用预置动画在 Mugeda 中制作顺畅的左右滑动切换卡片效果 · 李瑞东 LRD.IM</title>
    <link rel="icon" type="image/png" sizes="32x32" href="../img/favicon/favicon-32x32.png">

    <!-- main css -->
    <link rel="stylesheet" href="../css/main.css">

    <!-- clipboard js -->
    <script src="../js/clipboard.min.js"></script>
</head>
  <body>
    <!-- 导航栏-->
    <div class="container-fluid"> 
      <header class="box-header">
          <div class="vw">
          <a href="index.html" alt="lrd.im 是设计师李瑞东的个人网站。">
              <div class="box-logo"></div>
          </a>
          <!-- nav-text -->
          <div class="nav-text-box">
              <p><a href="../portfolio.html" class="nav-text">作品</a></p>
              <p><a href="../blog.html" class="nav-text">博客</a></p>
              <p><a href="../archive.html" class="nav-text">归档</a></p>
              <p><a href="../about.html" class="nav-text">关于我</a></p>
          </div>
          <div class="icon-menu" id="iconMenu"></div>
          <div class="icon-close hide" id="iconClose"></div>
      </div>
      </header>
  </div>
  <div class="nav-open hidden nav-transform" id="navOpen">
      <a href="../portfolio.html">作品</a>
      <a href="../blog.html">博客</a>
      <a href="../archive.html">归档</a>
      <a href="../about.html">关于我</a>
  </div>
  <div class="nav-mask hidden" id="navMask"></div>
  <!-- end 导航栏-->
  <article class="h-entry">
<header>
<h1 class="p-name">利用预置动画在 Mugeda 中制作顺畅的左右滑动切换卡片效果</h1>
<p class="article-info">Pudge · <time>2018-03-31 </time>首次发布于 <a href="https://pudge1996.medium.com/%E5%88%A9%E7%94%A8%E9%A2%84%E7%BD%AE%E5%8A%A8%E7%94%BB%E5%9C%A8-mugeda-%E4%B8%AD%E5%88%B6%E4%BD%9C%E9%A1%BA%E7%95%85%E7%9A%84%E5%B7%A6%E5%8F%B3%E6%BB%91%E5%8A%A8%E5%88%87%E6%8D%A2%E5%8D%A1%E7%89%87%E6%95%88%E6%9E%9C-541a66bede21" target="_blank">Medium</a></p>
</header>
<section data-field="subtitle" class="p-summary">
之前在做《刁角武汉》的时候对如何选择景点这个问题做了好几个方案，一个是画一张大地图，另一个是做垂直的列表选择，但我还是选择了左右滑动来切换景点。因为在多次尝试之后发现发现在手机屏上似乎不适合做可以上下左右滑动的大地图，而垂直列表在 Mugeda 上又有…
</section>
<section data-field="body" class="e-content">
<section class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--fullWidth"><figure class="graf graf--figure graf--layoutFillWidth graf--leading"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*CKNg-WLfdw2_SsrjKUdE8g.jpeg" width="1920" height="1080" data-is-featured="true" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/01.jpg"></figure></div><div class="section-inner sectionLayout--insetColumn"><h3 class="graf graf--h3 graf-after--figure graf--title">利用预置动画在 Mugeda 中制作顺畅的左右滑动切换卡片效果</h3><p class="graf graf--p graf-after--h3">之前在做《刁角武汉》的时候对如何选择景点这个问题做了好几个方案，一个是画一张大地图，另一个是做垂直的列表选择，但我还是选择了左右滑动来切换景点。因为在多次尝试之后发现发现在手机屏上似乎不适合做可以上下左右滑动的大地图，而垂直列表在 Mugeda 上又有 BUG，经常卡住滑不了。所以为了更好的用户体验，我选择了做左右滑动切换，模拟出平常 app 的效果。</p><h3 class="graf graf--h3 graf-after--p"><strong class="markup--strong markup--h3-strong">目录：</strong></h3><p class="graf graf--p graf-after--h3">一、解析动画效果</p><p class="graf graf--p graf-after--p">二、做出初步的动画效果</p><p class="graf graf--p graf-after--p">三、完善动画</p><h3 class="graf graf--h3 graf-after--p">一、解析动画效果</h3><p class="graf graf--p graf-after--h3">其实在 Mugeda 中如果要做到左右滑动切换卡片，点击进入的效果并不难。但是要加上动画效果的话还需要做一番调整。</p><figure class="graf graf--figure graf-after--p"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*b7ffW1mAvbYeKboyb6iuZQ.gif" width="774" height="606" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/02.gif"></figure><p class="graf graf--p graf-after--figure">可以看到切换动画效果可以拆分为几个动作，以“向左滑动”为例：“手指向左滑动” — “页面1从页面中心向左平移至画面外” — “切换至下一页” — “页面2从页面外向左平移至页面中心” ；</p><p class="graf graf--p graf-after--p">如果是“向右滑动”：“手指向右滑动” — “页面2从页面中心向右平移至画面外” — “切换至上一页” — “页面1从页面外向右平移至页面中心”</p><p class="graf graf--p graf-after--p">如果是用户的动作是“单击”，那就直接跳转到正文页了。</p><p class="graf graf--p graf-after--p">这里的动画效果我们利用 Mugeda 的预置动画来做，比用元件动画做会方便一些。比如“向左滑动”动作里“页面1从页面中心向左平移至画面外”这个动画，其实就是预置动画里的移出效果。</p><figure class="graf graf--figure graf-after--p"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*xIClZUaHRxHFb2LOXCbQdA.gif" width="904" height="680" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/03.gif"></figure><p class="graf graf--p graf-after--figure">所以，我们会用到预置动画里的“移出”和“移入”效果。</p><h3 class="graf graf--h3 graf-after--p">二、做出初步的动画效果</h3><p class="graf graf--p graf-after--h3">从上一步的分析可以得知，每个页面都需要3个关键帧。现在我来解释一下每个帧应该做什么。</p><p class="graf graf--p graf-after--p">第一帧是用户可以点击进入详情页的帧，控制用户进行“向左滑动”、“向右滑动”操作显示的动画。</p><p class="graf graf--p graf-after--p">第二帧显示跳转到下一页之前的动画，即向左的“移出”动画。</p><p class="graf graf--p graf-after--p">第三帧显示跳转到前一页之前的动画，即向右的“移出”动画。</p><p class="graf graf--p graf-after--p">所以可以整理出以下行为：</p><figure class="graf graf--figure graf-after--p"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*sJ6Yb7ic4GfqjeLp_wLtWQ.png" width="698" height="188" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/04.png"></figure><p class="graf graf--p graf-after--figure">注意：因为第一个页面没有上一页，最后一个页面也没有下一页，鉴于他们的特殊性，我们要在第一页里去掉行为4和第3帧，最后一页里去掉行为3和第二帧！（改变帧后要记得相对应的修改行为里的参数）</p><p class="graf graf--p graf-after--p">同时要额外配置：</p></div><div class="section-inner sectionLayout--outsetRow" data-paragraph-count="2"><figure class="graf graf--figure graf--layoutOutsetRow is-partialWidth graf-after--p" style="width: 57.179%;"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*ZnpkK2k3pVyNK15By0OfVw.png" width="292" height="187" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/05.png"></figure><figure class="graf graf--figure graf--layoutOutsetRowContinue is-partialWidth graf-after--figure" style="width: 42.821%;"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*CS9-EmiEsp7NAqOtLz19FA.png" width="298" height="255" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/06.png"></figure></div><div class="section-inner sectionLayout--insetColumn"><p class="graf graf--p graf-after--figure">所有的预置动画都要启用“自动播放”，并禁用“循环播放”。翻页设置也要讲翻页效果设置为“出现”。</p><p class="graf graf--p graf-after--p">预置动画这样设置的原因是为了能够正常显示被滑动对象的正常进/出场动画，而翻页设置的原因是保证画面上其他元素不会被用户操作所影响，保持固定的位置。</p><p class="graf graf--p graf-after--p">如果按照步骤来的话，你的 H5 已经可以做出带有动画的左右滑动切换效果了，但可以看到在中间的两个页面在切换的时候动画有些错误，为什么呢？</p><figure class="graf graf--figure graf-after--p"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*261B2XrsN3RFH-2YQXxO_A.gif" width="786" height="540" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/07.gif"></figure><h3 class="graf graf--h3 graf-after--figure">三、完善动画</h3><p class="graf graf--p graf-after--h3">因为我们每个页面的第一帧的预置动画都是从右向左的“移入”效果，所以只能保证一直往下翻页时动画的正常播放，但是从后往前操作时返回前一页默认是看到第一帧，如果还是现在的从右向左的“移入”效果，就弄反了，</p><p class="graf graf--p graf-after--p">正确的情况应该是如果用户是返回而来的，预置动画为从左向右的“移入”效果。</p><p class="graf graf--p graf-after--p">但是同一帧同一个元素，不能同时向左和向右“移入”，我们只能新开一帧（第4帧），这一帧专门为返回而来的页面服务。</p><p class="graf graf--p graf-after--p">于是我们要加一层条件判断，判断到如果用户是从页面返回而来的，就跳到第4帧，播放从左向右的“移入”动画。如果用户是左滑去下一页，则正常播放之前的效果。</p><p class="graf graf--p graf-after--p">我们先在第3页的第3帧添加一个文本，元素名称为 “from3to2” 内容为“0”，将第3页的被滑动对象添加一个行为：当出现时改变“from3to2”元素文本或取值属性，改为“3to2”，如下图：</p><figure class="graf graf--figure graf-after--p"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*8GTjsQRR26qNnn4F5tYRbA.png" width="1136" height="611" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/08.png"></figure><p class="graf graf--p graf-after--figure">然后我们在第2页的第1帧添加一个行为：跳转到帧并停止（第4帧）；触发条件：出现；执行条件：检查 “from3to2” 的元素状态中文本或取值等于 “3to2”，然后再第4帧中把预置动画改成为时长0.3秒的从左移入。如下图：</p><figure class="graf graf--figure graf-after--p"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*gmgeNqEHTmhm1lL-5z1ZMg.png" width="1140" height="685" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/09.png"></figure><p class="graf graf--p graf-after--figure">在第4帧中添加行为：重置“from3to2”元素的所有属性。这样才不会影响用户从右向左滑动到下一页时的效果。同时记得添加左右滑动时页面跳转的行为，因为如果用户是返回到该页面的话就是在第4帧中交互，而不是第1帧了。</p><p class="graf graf--p graf-after--p">我整理了一个表格，如下图所示：</p><figure class="graf graf--figure graf-after--p"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*sxPCoS0jwWD39BKtBfgrIA.png" width="1382" height="998" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/10.png"></figure><blockquote class="graf graf--blockquote graf-after--figure">要注意第3页和第4页的物体添加，与第4帧的联动。</blockquote><p class="graf graf--p graf-after--blockquote">重复给后面的页面设置就能做到流畅的左右滑动切换卡片效果。</p><figure class="graf graf--figure graf-after--p graf--trailing"><img class="graf-image lazyload" data-action="zoom" data-image-id="1*2AveMCHDEQgF9ac7aF5msA.gif" width="776" height="550" data-src="https://lrdim.oss-cn-shenzhen.aliyuncs.com/blogimg/2018-03-31-541a66bede21/11.gif"></figure></div></div></section>
</section>

<!-- 底部功能 -->
<hr class="end-dividers hr-1" data-content="分隔线">

<div class="article-navigation">
  <a href="2018-03-17-4d7ff2bc9cd1.html" class="previous">
    <!-- <a href="#"> -->
      <p>上一篇</p>
      <p class="title">macOS 安装 AE 插件 Flow 无法打开的修复方法</p>
    <!-- </a> -->
  </a>
  <a href="2018-04-01-bd8cfdac2fa5.html" class="next">
    <p>下一篇</p>
    <p class="title">毕业设计《刁角武汉》改版计划</p>
  </a>
</div>

<hr class="end-dividers hr-2" data-content="分隔线">

<div class="footer-action">
  <div class="back-to-article"><a href="../blog.html"><span class="icon-back"></span>博客首页</a></div>
  <div class="copy-link" id="copyLink"><a href="javascript:" id="blogLink" data-clipboard-text="利用预置动画在 Mugeda 中制作顺畅的左右滑动切换卡片效果 https://lrd.im/blog/2018-03-31-541a66bede21.html" ><span class="icon-link"></span>复制链接</a></div>
  <div class="copied hide" id="copied"><a href="javascript:" data-clipboard-text="利用预置动画在 Mugeda 中制作顺畅的左右滑动切换卡片效果 https://lrd.im/blog/2018-03-31-541a66bede21.html"><span class="icon-success"></span>复制成功!</a></div>
  <div class="mobile-top"><a href="#" onclick="backToTop(4)"><span class="icon-top"></span>回到顶部</a></div>
</div>

<!-- back to top -->
<div class="to-top" id="toTop" onclick="backToTop(4)">
  <svg style="width:20px; height:40px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="#232323">
      <path d="M277.375 427V167.296l119.702 119.702L427 256 256 85 85 256l29.924 29.922 119.701-118.626V427h42.75z"/>
  </svg>
</div>
<!-- end back to top -->

<!-- footer -->
<footer>
  <p class="copyright">© Pudge 2017-2021</p>
</footer>
<!-- end footer -->
</article>
<script src="https://cdn.jsdelivr.net/npm/zoom-vanilla.js/dist/zoom-vanilla.min.js"></script>
<script src="../js/lazysizes.min.js"></script>
<script src="../js/custom.js"></script>
</body>
</html>